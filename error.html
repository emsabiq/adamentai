<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Pesanan Dibatalkan</title>
  <meta name="description" content="Transaksi dibatalkan. Biasanya terjadi karena tombol Back ditekan saat pembayaran. Hubungi kami untuk melanjutkan."/>
  <style>
    :root{
      --primary:#356f6b;--text:#0f1b18;--bg:#f7faf9;--card:#ffffff;--border:#e6eeec;--danger:#b42318
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;color:var(--text);background:var(--bg)}
    .container{min-height:100%;display:grid;place-items:center;padding:clamp(16px,4vw,40px)}
    .card{width:min(840px,92vw);background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:0 2px 12px rgba(0,0,0,.06);padding:clamp(18px,3.2vw,32px)}
    .header{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
    .icon-wrap{width:44px;height:44px;border-radius:50%;display:grid;place-items:center;background:#fff6f6;border:1px solid #ffd3cf}
    .icon{width:22px;height:22px;color:var(--danger)}
    h1{margin:0;font-size:clamp(20px,2.2vw,30px)}
    .lead{margin:.35rem 0 0;color:#3a4a47}
    .alert{margin-top:12px;background:#fff6f6;border:1px solid #ffd3cf;color:#5c1a13;border-radius:10px;padding:10px 12px}
    .panel{margin-top:16px;background:#fafdfc;border:1px solid var(--border);border-radius:12px;padding:14px}
    .order-line{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .order-id{font-weight:700}
    .copy{appearance:none;border:1px solid var(--border);background:#fff;color:var(--text);padding:8px 12px;border-radius:10px;cursor:pointer}
    .cta{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
    .btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid transparent;text-decoration:none;font-weight:700}
    .btn.wa{background:var(--primary);color:#fff}
    .btn.ghost{background:#fff;border-color:var(--border);color:var(--text)}
    .btn.warn{background:#fff6f6;border:1px solid #ffd3cf;color:#5c1a13}
    .list{display:grid;gap:8px;margin:8px 0 0;color:#2c3a37}
    .footer{margin-top:18px;font-size:12px;color:#4b5b58}
  </style>
</head>
<body>
  <div class="container">
    <main class="card" role="main">
      <header class="header">
        <div class="icon-wrap" aria-hidden="true">
          <!-- X / error icon -->
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></svg>
        </div>
        <div>
          <h1>Pesanan dibatalkan</h1>
          <p class="lead">Biasanya ini terjadi karena tombol <em>Back</em> ditekan saat pembayaran, sehingga transaksi dibatalkan oleh sistem.</p>
        </div>
      </header>

      <div class="alert">Jika Anda sudah melakukan pembayaran namun status tetap batal, harap hubungi kami untuk verifikasi manual.</div>

      <section class="panel" aria-label="Detail Pesanan">
        <div class="order-line">
          <div>
            <div style="opacity:.75;font-size:12px">Nomor Pesanan</div>
            <div id="orderId" class="order-id">â€”</div>
          </div>
          <button class="copy" id="copyBtn" type="button" aria-label="Salin nomor pesanan">Salin</button>
        </div>
        <ul class="list">
          <li>Anda bisa mencoba <strong>checkout ulang</strong> atau konfirmasi via WhatsApp.</li>
          <li>Nomor pesanan membantu kami melacak status transaksi Anda.</li>
        </ul>
        <div class="cta">
          <a id="waLink" class="btn wa" href="#" target="_blank" rel="noopener">Hubungi WhatsApp</a>
          <a id="homeLink" class="btn ghost" href="https://adamentai.vercel.app">Kembali ke Beranda</a>
          <a id="retryLink" class="btn warn" href="#">Coba Checkout Ulang</a>
        </div>
      </section>

      <footer class="footer">Tips: Hindari menekan tombol Back saat halaman pembayaran terbuka untuk mencegah pembatalan otomatis.</footer>
    </main>
  </div>

<script>
  // Ambil nomor pesanan dari URL atau storage
  (function(){
    const p = new URLSearchParams(location.search);
    const order = (p.get('order') || sessionStorage.getItem('order_id') || localStorage.getItem('order_id') || '').trim();
    const el = document.getElementById('orderId');
    if(el) el.textContent = order || 'Tanpa Nomor (isi ?order=...)';

    // Build WA link
    const waNumber = '6285156042869'; // 085156042869
    const baseMsg = `Assalamu'alaikum. Pesanan saya${order?` ${order}`:''} berstatus cancel karena back saat pembayaran. Mohon bantuan.`;
    const waUrl = `https://wa.me/${waNumber}?text=${encodeURIComponent(baseMsg)}`;
    const waLink = document.getElementById('waLink');
    if(waLink) waLink.href = waUrl;

    // Retry checkout URL: gunakan ?checkout=/checkout atau default ke beranda
    const defaultHome = 'https://adamentai.vercel.app';
    const retryURL = p.get('checkout') || defaultHome;
    const retryLink = document.getElementById('retryLink');
    if(retryLink) retryLink.href = retryURL;

    // Copy button
    const copy = document.getElementById('copyBtn');
    if(copy){
      copy.addEventListener('click', async ()=>{
        try{ await navigator.clipboard.writeText(order || '');
          const old=copy.textContent; copy.textContent='Tersalin'; setTimeout(()=>copy.textContent=old,1200);
        }catch(e){ alert('Gagal menyalin.'); }
      });
    }
  })();
</script>
</body>
</html>
